# セリフ機能
- 音声合成ソフトから出力されるデータを受け取りAviUtl2へ送ります。
- 流し込みという機能で音声合成ソフト→新旧朗2→Aviutl2と直接送ることが出来るようになりました。
- 新旧朗2から送信したセリフは新旧朗2側から修正が行えます。

## 対応音声合成ソフト
+ VOICEROID2
+ VOICEVOX
+ CeVIOトーク
+ AIVOICE2

waveファイルとテキストファイルが送信される設定であれば、ほとんどの形式に対応しています。

### 対応文字コード
+ ShiftJIS
+ UTF-8(BOMなし)
+ UTF-8(BOMあり)

## 台本
![説明](images\serif\clipboard_20260208_152048_284.png)

- セリフは台本という名称で管理します。
- 1動画で1台本作る感覚です。
- 設定は台本に記録されます。
- 設定を流用する場合は台本をコピーして使います。
- 台本をコピーしてもセリフはコピーされません
- 動画を出力し終わり不要になった台本は削除して構いません。
- 台本を削除するとセリフの音声データが消えるので注意してください。
## 監視
![説明](images\serif\clipboard_20260208_153431_704.png)

最初に行いますが、一度設定すれば二度と触らないのが監視の設定です。
ここで音声合成ソフトから出力されるフォルダを選択します。

### 音声合成ソフトの名称
将来複数の音声合成ソフトで別々の出力先があるという場合、複数に対応する必要があるために用意しています。

### 監視フォルダ
音声合成ソフトから出力されるフォルダを選びます。

### 監視時間
音声合成ソフトが安定する待ち時間を設定します。正しく受け取れない場合はこの時間を長めにとって下さい。

## セリフツールのメニューについて

セリフツールの上部には、  
**セリフの受信や送信を制御するためのメニュー** が配置されています。

中心となるのが **開始ボタン** です。

---

### 開始ボタン

監視の設定が正しく行われていると、  
開始ボタンを押すことでセリフツールを動作状態にできます。

起動方法によって、  
ボタンの動作と状態遷移が異なります。

---

### デスクトップ版の場合

デスクトップ版では、  
次の 2 つの状態を切り替えます。

- 開始  
  セリフの受信準備を行い、監視状態になります

- 停止  
  セリフの受信を停止します

---

### プラグイン版の場合

プラグイン版では、  
次の順番で状態が切り替わります。

- 開始  
  セリフの受信準備を行います

- 流し込み  
  音声合成ソフトから送られてきたセリフを  
  **そのまま AviUtl2 に送信** します

- 停止  
  すべての受信・送信処理を停止します

---

### 流し込み状態について

流し込み状態にすると、

- 音声合成ソフトから出力されたセリフが  
  自動的に AviUtl2 へ送信されます
- 同時に、新旧朗2 側にもセリフデータは保存されます

そのため、

- 後からセリフの修正を行う
- 送信済みの内容を確認する

といった操作も可能です。

---

### 常駐動作について

開始中、または流し込み中は、  
**セリフツールが常駐状態** になります。

この状態では、

- セリフツールのウィンドウを閉じても  
  処理は終了しません
- 音声合成ソフトからの出力を引き続き受け取り  
  AviUtl2 へ流し込むことができます

作業中にツール画面を閉じても、  
音声合成ソフト → AviUtl2 の流れを止めずに使えるのが特徴です。


## 脚本
![説明](images\serif\clipboard_20260208_153619_669.png)

VOICEROID2、AIVOICEなど　キャラクタ名＞セリフ　の形式で入力する場合に使うと便利なツールです。
上側がセリフ、下側がキャラクタリストになります。

### キャラクタリスト
使用している音声合成ソフトで
キャラクタ名＞
という感情を含めたシグネチャを作りCttl+Aで範囲選択しCtrl+Cでクリップボードに送ります。
音声合成ソフトの左側にあるキャラ名＋感情をD&Dして全部用意する感じです。
キャラクタリストでCtrl+vを使って貼り付けるとキャラ名と感情を含めたシグネチャが登録されます。
次に各キャラごとにキーを割り当てます。
zxcv asdf qwer などブラインドタッチしやすいキーがお薦めです。

### セリフリスト
脚本をテキストエディタなどで書いたあとCttl+Aで範囲選択しCtrl+Cでクリップボードに送ります。
セリフリストにCtrl+vを使って貼り付けるとセリフが表示されます。
さきほど登録したショートカットキーを押すとセリフにキャラと感情が割り当てられます。
自動的に次のセリフにカーソルが移動しますのでキーを押すだけです。
最後にCtrl+C押した後音声合成ソフトでCtrl+Vを押して貼り付けるとシグネチャ月のセリフが完成します。

## セリフとシーンについて

### セリフ

![説明](images\serif\clipboard_20260208_155758_482.png)


セリフは、  
**音声合成ソフトから出力されるデータを一時的に受け取り、AviUtl2 に送信するためのデータ** です。

音声合成ソフトから出力された音声ファイルとテキストは、  
まず新旧朗2のセリフツールで受け取られます。

「流し込み」機能を使用した場合でも、

- 音声合成ソフト → 新旧朗2 → AviUtl2

という処理の途中で、  
**一時的にセリフデータがここに登録** されます。

そのため、  
送信済みのセリフであっても、新旧朗2 側から内容の確認や修正を行うことができます。

---

### シーン

シーンは、  
**セリフをまとまりごとに管理するための単位** です。

動画内の構成に合わせて、

- 会話の区切り
- 場面転換
- 話題ごとのまとまり

といった単位でシーンを分けることで、  
セリフ全体を整理しやすくなります。

#### シーンの追加

シーンは、  
シーン右端に表示されている **「＋」のタグ** をクリックすることで追加できます。

あらかじめシーンを用意しておくことで、  
後から登録されるセリフを意図した位置に整理できます。

#### セリフの登録

シーンの準備ができた状態で、  
音声合成ソフトから音声を出力すると、

- 出力された音声とテキストが検出され
- 対応するセリフが **セリフリストに登録** されます

登録されたセリフは、  
現在選択されているシーン内に追加され、  
そのまま AviUtl2 へ送信できます。

---

シーンを適切に分けて管理することで、  
長い動画やセリフ量の多いプロジェクトでも、  
セリフ編集を効率良く行うことができます。

## セリフリストでの操作について

セリフリストでは、  
キーボード操作やドラッグ操作を使って、  
セリフの並びや内容を効率良く編集できます。

### セリフの並び替え

- Ctrl + 上キー  
  選択中のセリフを **1行上へ移動** します

- Ctrl + 下キー  
  選択中のセリフを **1行下へ移動** します

セリフの順番を調整したい場合に使用します。

### 改行位置の調整

- 左キー  
  改行位置を左へ移動します

- 右キー  
  改行位置を右へ移動します

セリフの表示バランスや読みやすさを、  
細かく調整することができます。

### 記号の追加・削除

セリフの末尾に、  
次の記号を簡単に追加・削除できます。

- ! / ！  
  感嘆符を末尾に追加または削除します

- ? / ？  
  疑問符を末尾に追加または削除します

感情表現を素早く調整したい場合に便利です。

### AviUtl2 への送信方法

起動方法によって、  
セリフの送信方法が異なります。

#### AviUtl2 から起動している場合

- Enter キーを押す  
  選択中のセリフを **AviUtl2 に送信** します

- メニュー操作  
  セリフを **まとめて送信** することもできます

#### デスクトップ版などで起動している場合

- セリフを **AviUtl2 にドラッグ＆ドロップ** して送信します
- 複数行のセリフを **まとめて送信** することも可能です

---

これらの操作を使うことで、  
セリフの編集から AviUtl2 への反映までを、  
スムーズに行うことができます。

## 修正について

AviUtl2 から新旧朗2を起動した場合、  
**すでに AviUtl2 に送信されているセリフ** が、  
セリフリストに表示されます。

### 一時データとの違い

通常の「セリフ」は、  
音声合成ソフトから **一時的に受け取ったデータ** を指します。

それに対して、  
修正で表示されるセリフは、

- **現在 AviUtl2 上に存在しているセリフ**
- すでにタイムラインに配置されているデータ

が対象になります。

### セリフの修正

修正で表示されるセリフは、  
通常のセリフと同様に編集することができます。

- 文字の修正
- 記号の追加・削除
- 並び順の確認

など、セリフリスト上で行った編集内容は、  
**自動的に AviUtl2 側のセリフにも反映** されます。

### AviUtl2 との連動

- セリフを選択すると、  
  AviUtl2 上で **該当するセリフが配置されている位置へ  
  カーソルが自動的に移動** します

これにより、

- どの位置のセリフを編集しているのか
- タイムライン上での前後関係

をすぐに確認できます。

---

修正機能を使うことで、  
一度配置したセリフも AviUtl2 上で探し回ることなく、  
新旧朗2 側から効率良く調整できます。

## 配役について

配役は、  
**音声合成ソフトから送られてきたセリフが「誰のセリフなのか」を識別し、管理するための設定** です。

ここで設定した内容をもとに、

- セリフを AviUtl2 のどのレイヤーに送るか
- 音声データをどのレイヤーに配置するか

といった処理が自動的に行われます。

配役の設定は、  
**送信** や **流し込み** を行う際に必須となります。

---

### D&D 時の挙動について

セリフを AviUtl2 に **ドラッグ＆ドロップ** した場合でも、  
配役で設定したレイヤー情報が使用されます。

このとき、

- 設定されたレイヤーは **相対レイヤー** として扱われ
- AviUtl2 上の現在の配置状況に応じて反映されます

そのため、レイヤー構成を柔軟に保ったまま運用できます。

---

### 配役の設定項目

![説明](images\serif\clipboard_20260208_161707_535.png)


配役には、次の項目を設定します。

#### 名称

- 音声合成ソフト上で使用している **キャラクター名**
- 識別用の表示名として使用されます

#### キーワード

- セリフとして送られてくるテキストの中から、  
  **誰のセリフかを判別するためのキーワード**
- キャラクター名やシグネチャ文字列などを指定します

#### 感情

- 現在は **未使用の項目** です
- 将来の拡張を想定して用意されています

#### セリフレイヤー

- セリフ（テキスト）を **AviUtl2 のどのレイヤーに送るか** を指定します

#### 音声レイヤー

- 音声データ（Wave）を **AviUtl2 のどのレイヤーに送るか** を指定します

#### 音量

- 送信される音声データの **再生音量** を設定します

#### 位置

- 音声データの **配置位置** を設定します  
- キャラクターごとの定位調整などに使用できます

#### 背景色

- キャラクターごとの **イメージカラー**
- セリフ表示時の背景色として使用されます

#### 文字色

- キャラクターごとの **文字色**
- セリフ表示時の文字色として使用されます

---

### イメージカラーについて

主要な音声合成ソフトのキャラクターについては、  
**あらかじめイメージカラーが登録済み** です。

そのため、初期状態でもすぐに使い始めることができ、  
必要に応じて色を変更することも可能です。

---

配役を正しく設定することで、  
複数キャラクターのセリフや音声を混在させる場合でも、  
AviUtl2 上で整理された状態を保つことができます。

## 設定について

![説明](images\serif\clipboard_20260208_162414_839.png)


「設定」では、  
**セリフ機能の基本動作に関わる項目** をまとめて設定します。

ここで指定した内容は、  
セリフの送信や流し込み時の挙動に影響します。

---

### セリフ前

- 前のセリフとの **間隔を秒単位で設定** します
- セリフ同士の間を空けたい場合に使用します

### セリフ後

- セリフの **後に入れる間隔を秒単位で設定** します
- 次のセリフまでの余白を調整できます

### 改行位置

- セリフの **改行位置となる標準の文字数** を設定します
- 指定した文字数を超えると、自動的に改行されます
- 0 を指定した場合は、**自動改行を行いません**

---

これらの設定を調整することで、  
セリフのテンポや表示バランスを、  
動画全体に合わせて整えることができます。

## 表示について

![説明](images\serif\clipboard_20260208_162334_054.png)

セリフは、  
**セリフ単体では画面に表示されません**。

セリフを画面に表示するためには、  
**セリフ表示オブジェクト** が必ず必要になります。

---

### セリフ表示の仕組み

セリフを使用する際は、

- セリフを配置したレイヤーを  
  **参照レイヤーとして設定**
- その状態で、セリフを **AviUtl2 へドラッグ＆ドロップ**

という手順で使用します。

AviUtl2 に送信した後でも、  
**参照するレイヤーは手動で変更** することができます。

---

### フォント管理について

この仕組みにより、

- セリフごとにフォントを設定する必要がない
- セリフ表示オブジェクト側の設定だけで

フォント・文字サイズ・装飾などを  
**一括で管理** することができます。

そのため、

- 動画全体でフォントを統一したい場合
- 後からフォントやサイズを変更したい場合

でも、  
セリフ表示オブジェクトの設定を変更するだけで対応できます。

---

この構成により、  
セリフ管理と表示設定を分離し、  
効率良く編集できるようになっています。


